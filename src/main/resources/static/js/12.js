webpackJsonp([12],{259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(297),l=a(326),o=a(23),r=o(n.a,l.a,!1,null,null,null);t.default=r.exports},275:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"e",function(){return u}),a.d(t,"b",function(){return c}),a.d(t,"d",function(){return d});var n=a(18),l=a.n(n),o="/api/role",r=function(e){return l.a.get(o+"/list",{params:e}).then(function(e){return e.data})},i=function(e){return l.a.get(o+"/all",{params:e}).then(function(e){return e.data})},s=function(e){return l.a.post(o+"/update",e).then(function(e){return e.data})},u=function(e){return l.a.post(o+"/menu/set",e).then(function(e){return e.data})},c=function(e){return l.a.post(o+"/add",e).then(function(e){return e.data})},d=function(e){return l.a.get(o+"/"+e.id+"/delete").then(function(e){return e.data})}},297:function(e,t,a){"use strict";var n=a(57),l=a.n(n),o=a(275),r=a(108);t.a={created:function(){var e=this;a.i(o.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.roles=t.data.list,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.total=t.data.total})},methods:{loadRoleList:function(){var e=this;a.i(o.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.roles=t.data.list,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.total=t.data.total})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){var t=this;this.pageNum=e,a.i(o.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){t.roles=e.data.list,t.total=e.data.total})},handleInsert:function(){this.dialogInsertVisible=!0,this.currentRole={}},handleDialogInsert:function(){var e=this;a.i(o.b)(this.currentRole).then(function(t){e.dialogInsertVisible=!1;var a=t.meta;t.data;!1===a.success?e.$message.error(a.message):(e.$message({message:"操作成功",type:"success"}),e.loadRoleList(),console.log(e.currentRole),e.currentRole={})})},handleEdit:function(e){this.currentRole=JSON.parse(l()(e)),this.dialogEditVisible=!0},handleDialogEdit:function(){var e=this;a.i(o.c)(this.currentRole).then(function(t){e.dialogEditVisible=!1;var a=t.meta;t.data;!1===a.success?e.$message.error(a.message):(e.$message({message:"操作成功",type:"success"}),e.loadRoleList(),console.log(e.currentRole),e.currentRole={})})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(o.d)({id:e.id}).then(function(e){var a=e.meta;e.data;!1===a.success?t.$message.error(a.message):(t.$message({message:"删除成功",type:"success"}),t.loadRoleList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSetMenu:function(e){var t=this;this.currentRole=e,a.i(r.b)().then(function(e){t.tree=e.data,t.dialogSetMenuVisible=!0})},handleDialogSetAuth:function(){var e=this;this.sels=this.sels.concat(this.$refs.tree.getCheckedKeys()),this.sels=this.sels.concat(this.$refs.tree.getHalfCheckedKeys());var t=this.sels.map(function(e){return e}).join();a.i(o.e)({ids:t,rid:this.currentRole.id}).then(function(t){e.dialogSetMenuVisible=!1;var a=t.meta;t.data;!1===a.success?e.$message.error(a.message):(e.$message({message:"操作成功",type:"success"}),e.loadRoleList(),e.sels=[],e.currentRole={})})},fmtStatus:function(e,t){var a=e[t.property];return 2==a?"禁用":1==a?"可用":void 0},fmtMenus:function(e,t){var a=e[t.property];if(0===a.length)return"无";for(var n="",l=0;l<a.length;l++)n+=0===l?a[l].name:","+a[l].name;return n}},data:function(){return{pageNum:1,total:0,pageSize:5,roles:[],tree:[],defaultProps:{children:"children",label:"name"},dialogEditVisible:!1,dialogInsertVisible:!1,dialogSetMenuVisible:!1,currentRole:{},statusOptions:[{value:1,label:"可用"},{value:2,label:"禁用"}],sels:[]}}}},326:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{staticStyle:{margin:"7px"},on:{click:e.handleInsert}},[e._v("添加角色")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles}},[a("el-table-column",{attrs:{prop:"name",label:"代号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nameZh",label:"名字",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否可用",width:"180",formatter:e.fmtStatus}}),e._v(" "),a("el-table-column",{attrs:{prop:"menus",label:"菜单",formatter:e.fmtMenus}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.handleSetMenu(t.row)}}},[e._v("分配权限")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("el-form",{ref:"currentRoleEditForm",attrs:{model:e.currentRole,"label-position":"left"}},[a("el-form-item",{attrs:{label:"代号"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentRole.name,callback:function(t){e.$set(e.currentRole,"name",t)},expression:"currentRole.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名字"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentRole.nameZh,callback:function(t){e.$set(e.currentRole,"nameZh",t)},expression:"currentRole.nameZh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可用"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currentRole.status,callback:function(t){e.$set(e.currentRole,"status",t)},expression:"currentRole.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogEdit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.dialogInsertVisible},on:{"update:visible":function(t){e.dialogInsertVisible=t}}},[a("el-form",{ref:"currentRoleInsertForm",attrs:{model:e.currentRole,"label-position":"left"}},[a("el-form-item",{attrs:{label:"代号"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentRole.name,callback:function(t){e.$set(e.currentRole,"name",t)},expression:"currentRole.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名字"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentRole.nameZh,callback:function(t){e.$set(e.currentRole,"nameZh",t)},expression:"currentRole.nameZh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可用"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currentRole.status,callback:function(t){e.$set(e.currentRole,"status",t)},expression:"currentRole.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInsertVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogInsert}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配权限",visible:e.dialogSetMenuVisible},on:{"update:visible":function(t){e.dialogSetMenuVisible=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.tree,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSetMenuVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSetAuth}},[e._v("分配权限")])],1)],1)],1)},l=[],o={render:n,staticRenderFns:l};t.a=o}});
//# sourceMappingURL=12.js.map?4de23cc4c60a097b8f41