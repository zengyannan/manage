webpackJsonp([10],{249:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(287),n=r(321),l=r(23),o=l(a.a,n.a,!1,null,null,null);t.default=o.exports},273:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"f",function(){return s}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"e",function(){return d});var a=r(18),n=r.n(a),l="/api/hr",o=function(e){return n.a.get(l+"/list",{params:e}).then(function(e){return e.data})},s=function(e){return n.a.get(l+"/list/byRoleName",{params:e}).then(function(e){return e.data})},i=function(e){return n.a.post(l+"/update",e).then(function(e){return e.data})},u=function(e){return n.a.post(l+"/add",e).then(function(e){return e.data})},c=function(e){return n.a.get(l+"/"+e.id+"/delete").then(function(e){return e.data})},d=function(e){return n.a.post(l+"/setRoles",e).then(function(e){return e.data})}},275:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"f",function(){return s}),r.d(t,"c",function(){return i}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return c}),r.d(t,"d",function(){return d});var a=r(18),n=r.n(a),l="/api/role",o=function(e){return n.a.get(l+"/list",{params:e}).then(function(e){return e.data})},s=function(e){return n.a.get(l+"/all",{params:e}).then(function(e){return e.data})},i=function(e){return n.a.post(l+"/update",e).then(function(e){return e.data})},u=function(e){return n.a.post(l+"/menu/set",e).then(function(e){return e.data})},c=function(e){return n.a.post(l+"/add",e).then(function(e){return e.data})},d=function(e){return n.a.get(l+"/"+e.id+"/delete").then(function(e){return e.data})}},287:function(e,t,r){"use strict";var a=r(57),n=r.n(a),l=r(273),o=r(275);t.a={created:function(){var e=this;r.i(l.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.hrs=t.data.list,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.total=t.data.total})},methods:{loadHrList:function(){var e=this;r.i(l.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.hrs=t.data.list,e.pageNum=t.data.pageNum,e.pageSize=t.data.pageSize,e.total=t.data.total})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){var t=this;this.pageNum=e,r.i(l.a)({pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){t.hrs=e.data.list,t.total=e.data.total})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.i(l.b)({id:e.id}).then(function(e){var r=e.meta;e.data;!1===r.success?t.$message.error(r.message):(t.$message({message:"删除成功",type:"success"}),t.loadHrList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSetRole:function(e){var t=this;this.currentHr=e,r.i(o.f)().then(function(e){t.roles=e.data,t.dialogSetRolesVisible=!0})},handleInsert:function(e){this.dialogInsertVisible=!0,this.currentHr={}},handleEdit:function(e){this.dialogEditVisible=!0,this.currentHr=JSON.parse(n()(e))},handleDialogEdit:function(){var e=this;this.$refs.currentHrEditForm.validate(function(t){t&&r.i(l.c)(e.currentHr).then(function(t){e.dialogEditVisible=!1;var r=t.meta;t.data;!1===r.success?e.$message.error(r.message):(e.$message({message:"操作成功",type:"success"}),e.loadHrList(),e.currentHr={})})})},handleDialogInsert:function(){var e=this;this.$refs.currentHrInsertForm.validate(function(t){t&&r.i(l.d)(e.currentHr).then(function(t){e.dialogInsertVisible=!1;var r=t.meta;t.data;!1===r.success?e.$message.error(r.message):(e.$message({message:"操作成功",type:"success"}),e.loadHrList(),console.log(e.currentHr),e.currentHr={})}),console.log(e.currentHr)})},fmtRoles:function(e,t){var r=e[t.property];if(0===r.length)return"无";for(var a="",n=0;n<r.length;n++)a+=0===n?r[n].nameZh:","+r[n].nameZh;return a},roleSelsChange:function(e){this.sels=e},handleDialogSetRoles:function(){var e=this,t=this.sels.map(function(e){return e.id}).join(),a=this.currentHr.id;r.i(l.e)({uid:a,ids:t}).then(function(t){e.dialogSetRolesVisible=!1;var r=t.meta;t.data;!1===r.success?e.$message.error(r.message):(e.$message({message:"操作成功",type:"success"}),e.loadHrList(),e.currentHr={},e.sels=[])})},handleRoleSelsChange:function(e,t,r){this.$refs.rolesTable.toggleRowSelection(e)}},data:function(){return{pageNum:1,total:0,pageSize:7,hrs:[],roles:[],dialogEditVisible:!1,dialogInsertVisible:!1,dialogSetRolesVisible:!1,currentHr:{},statusOptions:[{value:1,label:"可用"},{value:2,label:"禁用"}],hrDialogRule:{name:[{required:!0,message:"请输入名字",trigger:"blur"}]},rolesPageNum:1,rolesTotal:0,rolesPageSize:5,sels:[]}}}},321:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("el-button",{staticStyle:{margin:"7px"},on:{click:e.handleInsert}},[e._v("添加用户")])],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.hrs}},[r("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"名字",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),r("el-table-column",{attrs:{prop:"roles",label:"角色",formatter:e.fmtRoles}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){e.handleSetRole(t.row)}}},[e._v("分配角色")])]}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNum=t}}})],1),e._v(" "),r("el-dialog",{attrs:{title:"修改",visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[r("el-form",{ref:"currentHrEditForm",attrs:{model:e.currentHr,rules:e.hrDialogRule,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"name",label:"名字"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentHr.name,callback:function(t){e.$set(e.currentHr,"name",t)},expression:"currentHr.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentHr.username,callback:function(t){e.$set(e.currentHr,"username",t)},expression:"currentHr.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentHr.phone,callback:function(t){e.$set(e.currentHr,"phone",t)},expression:"currentHr.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentHr.address,callback:function(t){e.$set(e.currentHr,"address",t)},expression:"currentHr.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.currentHr.password,callback:function(t){e.$set(e.currentHr,"password",t)},expression:"currentHr.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.currentHr.remark,callback:function(t){e.$set(e.currentHr,"remark",t)},expression:"currentHr.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可用"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currentHr.status,callback:function(t){e.$set(e.currentHr,"status",t)},expression:"currentHr.status"}},e._l(e.statusOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogEdit}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.dialogInsertVisible},on:{"update:visible":function(t){e.dialogInsertVisible=t}}},[r("el-form",{ref:"currentHrInsertForm",attrs:{model:e.currentHr,rules:e.hrDialogRule,"label-position":"left"}},[r("el-form-item",{attrs:{prop:"name",label:"名字"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入名字"},model:{value:e.currentHr.name,callback:function(t){e.$set(e.currentHr,"name",t)},expression:"currentHr.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入用户名"},model:{value:e.currentHr.username,callback:function(t){e.$set(e.currentHr,"username",t)},expression:"currentHr.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入电话"},model:{value:e.currentHr.phone,callback:function(t){e.$set(e.currentHr,"phone",t)},expression:"currentHr.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入地址"},model:{value:e.currentHr.address,callback:function(t){e.$set(e.currentHr,"address",t)},expression:"currentHr.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.currentHr.password,callback:function(t){e.$set(e.currentHr,"password",t)},expression:"currentHr.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入备注"},model:{value:e.currentHr.remark,callback:function(t){e.$set(e.currentHr,"remark",t)},expression:"currentHr.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可用"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currentHr.status,callback:function(t){e.$set(e.currentHr,"status",t)},expression:"currentHr.status"}},e._l(e.statusOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogInsertVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogInsert}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配角色",visible:e.dialogSetRolesVisible,"label-position":"left"},on:{"update:visible":function(t){e.dialogSetRolesVisible=t}}},[r("el-table",{ref:"rolesTable",staticStyle:{width:"100%"},attrs:{data:e.roles},on:{"row-click":e.handleRoleSelsChange,"selection-change":e.roleSelsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"英文名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"nameZh",label:"中文名"}})],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:0===this.sels.length},on:{click:e.handleDialogSetRoles}},[e._v("分配角色")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogSetRolesVisible=!1}}},[e._v("取 消")])],1)],1)],1)},n=[],l={render:a,staticRenderFns:n};t.a=l}});
//# sourceMappingURL=10.js.map?8417df74ea1738e9d846